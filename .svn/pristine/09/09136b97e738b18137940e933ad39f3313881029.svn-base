<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="/resources/js/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<title>통계</title>
<style>
</style>
</head>
<body>
	<div>
		<canvas id="myChart"></canvas>
		<input type="button" value="누르면데이터바꿔" id="modify-btn"/>
	</div>

<script>
var ctx = document.getElementById('myChart');

var myChart = new Chart(ctx, {
	type : 'bar',
	data : {
		labels : [ 'Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange' ],
		datasets : [ {
			label : '# of Votes',
			data : [ 12, 19, 3, 5, 2, 3 ],
			borderWidth : 1,
			 backgroundColor: [
                 'rgba(255, 99, 132, 0.5)',
                 'rgba(54, 162, 235, 0.5)',
                 'rgba(255, 206, 86, 0.5)',
                 'rgba(75, 192, 192, 0.5)',
                 'rgba(153, 102, 255, 0.5)',
                 'rgba(255, 159, 64, 0.5)'],
             borderColor: ['rgb(255, 99, 132,1.5)',
                 'rgba(54, 162, 235, 1.5)',
                 'rgba(255, 206, 86, 1.5)',
                 'rgba(75, 192, 192, 1.5)',
                 'rgba(153, 102, 255, 1.5)',
                 'rgba(255, 159, 64, 1.5)'],
		} ]
	},
	options : {
		scales : {
			y : {
				beginAtZero : true
			}
		}
	}
});

var modifyBtn = document.getElementById('modify-btn');
modifyBtn.addEventListener('click',function(){
	// 차트 객체에서 데이터에 접근하여 로그에 출력
    console.log(myChart.data); // 차트의 데이터
    console.log(myChart.data.datasets[0].data); // 데이터셋의 데이터 배열
    
    myChart.data.datasets[0].data[0] = 1;
    myChart.data.datasets[0].data[1] = 2;
    myChart.data.datasets[0].data[2] = 3;
    myChart.data.datasets[0].data[3] = 4;
    myChart.data.datasets[0].data[4] = 5;
    myChart.data.datasets[0].data[5] = 6;
    
    myChart.data.datasets[0].label = "득표수";
    
    myChart.data.labels[0] = "빨강색";
    myChart.data.labels[2] = "노랑색";
    myChart.data.labels[4] = "보라색";
    
    
    myChart.update();
});
</script>
</body>
</html>