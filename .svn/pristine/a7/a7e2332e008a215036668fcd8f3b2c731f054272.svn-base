<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.dduk.mapper.WorkforceManagementMapper">

<insert id="createNurSchedule" parameterType="nurScheduleVO">
	<selectKey resultType="String" order="BEFORE" keyProperty="nurscNo">
		SELECT 'NUSC' || TRIM(TO_CHAR(SUBSTR(MAX(NURSC_NO),5)+1,'0000')) 
		AS NURSC_NO FROM NUR_SCHEDULE
	</selectKey>
	INSERT INTO NUR_SCHEDULE (NURSC_DT, EMP_NO, NURSC_TYPE, NURSC_ENDT, NURSC_WT, NURSC_NO)
	VALUES (#{nurscDt}, #{empNo}, #{nurscType}, SYSDATE, #{nurscWt}, #{nurscNo})
</insert>

<select id="getNurScheduleList" resultType="nurScheduleVO" parameterType="String">
	SELECT *
	FROM NUR_SCHEDULE
	WHERE EXTRACT(MONTH FROM NURSC_DT) = #{month}
	ORDER BY NURSC_DT ASC
</select>

</mapper>