<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<style>
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/**/
.nurse-chart-write-title {
	display: flex;
    gap: 385px;
}
.nurse-chart-view-title {
	display: flex;
    gap: 289px;
}
.btn-nurse-chart-save {
	height: 28px;
}
#nurCont {
	width: 97%;
    height: 149px;
}
.nurse-chart-view-date {
	padding-top: 3px;
	color: var(--black-03, #8D9EA5) !important;
    font-family: 'Pretendard5';
}
/**/

.rounds-left {
	width: 30%;
	border: none;
	padding: 0px;
}

.ward-right-wrap {
	display: flex;
}

.nurse-chart {
	width: 700px;
    height: 350px;
}

.nurse-chart-header {
	margin: -16px -16px 0px -16px;
    padding: 16px 24px 8px 24px;
    border-bottom: 1px solid #EBEFF0;
}

.nurse-chart-body {

}

.nurse-chart-cont {
	padding-top: 16px;
}

.nurse-chart-body-top {
	padding-top: 8px;
}

.nurse-chart-list {
	height: 284px;
    width: 155px;
    margin: 0px -16px -16px -16px;
    padding: 8px 16px 16px 16px;
    border-right: 1px solid var(--border, #EBEFF0);
    overflow-y: scroll;
    overflow-x: hidden;
}

.nurse-chart-list-date {
	text-align: center;
	width: 120px;
	padding: 5px;
}

.rounds-chart-list-default {
	text-align: center;
	width: 130px;
	padding: 5px;
}

.rounds-chart-list-date:hover {
	background-color: #F8F9FC;
} 

.nurse-chart-detail {
    width: 543px;
    height: 267px;
    margin: 8px -17px -16px 16px;
    padding: 0px 16px 16px 16px;
    border-radius: 0px 0px 24px 0px;
}

.nurse-record {
    height: 474px;
    margin-top: 16px;
}

.nurse-record-header {
	width: 110%;
	margin: -16px -16px 0px -16px;
    padding: 16px 24px 8px 24px;
    border-bottom: 1px solid #EBEFF0;
}

.nurse-record-aside {
	height: 409px;
    width: 155px;
    margin: 0px -16px -16px -16px;
    padding: 8px 16px 16px 16px;
    border-right: 1px solid var(--border, #EBEFF0);
    overflow-y: scroll;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
}

.nurse-record-aside-tab {
	margin-left: 2.5%;
    width: 100%;
    text-align: center;
    background: var(--bg-01, #F8F9FC);
    border-radius: 10px;
}

.nurse-record-aside-tab.record-tab-selected {
	margin-left: 2.5%;
    width: 100%;
    text-align: center;
    background: var(--bg-01, #DBF2F4);
    border-radius: 10px;
    color: black !important;
}

.btn-rounds-save {
	width: 65px;
    margin-left: 65%;
    height: 30px;
    padding: 0px;
}

.btn-rounds-complete {
	width: 65px;
    margin-left: 65%;
    height: 30px;
    padding: 0px;
}

.rounds-chart-detail-inner-border {
	height: 624px;
    border-radius: 24px;
    border: 1px solid var(--border, #E0E8E6);
    padding: 16px;
    background: var(--white, #FFF);
    overflow-y: scroll;
}

.rounds-bed-list {
	width: 1016px;
}

.bed-large {
	border-radius: 24px;
	background: var(--BG-01, #F8F9FC);
	width: 400px !important;
}

.bed-small {
	border-radius: 24px;
	background: var(--BG-01, #F8F9FC);
	width: 200px !important;
	height: 160px;
}

.bed-list-2 {
	margin-top: 5%;
}

.bed-list-4 {
	position: absolute;
    margin-top: 2%;
    margin-left: 1%;
}

.bed-list-6 {
	display: flex;
	justify-content: space-evenly;
	margin-top: 10%;
	margin-left: -2%;
}

.bed-list-6-list {
	margin-left: -21%;
}

.bed-list-6-right {
	margin-right: -2%;
    margin-left: 3%;
}

.bed-wrap-2 {
	display: flex;
    gap: 24px;
    justify-content: space-evenly;
}

.bed-wrap-4 {
	display: flex;
    gap: 24px;
    justify-content: flex-end;
    margin-left: 1.5%;
}

.bed-wrap-6 {
	display: flex;
    gap: 24px;
    justify-content: space-evenly;
    flex-direction: column;
}

.title-bed-2 {
	padding: 24px 0px 0px 36px;
}

.title-bed-4 {
	padding: 38px 0px 0px 36px;
}

.title-bed-6 {
	margin-left: 190px;
	margin-bottom: 30px;
}

.btn-room-change {
	width: 230px;
    height: 48px;
    position: absolute;
    margin: 24px 0px 0px 723px;
}

.room-tab {
	border-radius: 10px;
}

.hidden {
	display: none;
}

.hand-over {
	margin-left: 16px;
	width: 300px;
	height: 840px;
}

.hand-over-head {
	margin: -16px -16px 0px -16px;
    padding: 16px 24px 8px 24px;
    border-bottom: 1px solid #EBEFF0;
}

.hand-over-body {
	padding-top: 16px;
	display: flex;
	width: 100%;
	height: 755px;
	overflow-y: scroll;
	text-align: center;
	flex-direction: column;
}

.hand-over-detail {
	padding: 16px;
}

.hand-over-detail-header {

}

.hand-over-detail-profile {
	width: 24px;
	height: 24px;
	border-radius: 100%;
}

.hand-over-detail-name {
	padding-top: 3px;
}

.hand-over-detail-time {
	padding-top: 3px;
}

.hand-over-detail-body {

}

.hand-over-detail-cont {
	text-align: left;
    padding-top: 10px;
}

.hand-over-detail-date {
	margin: 48px 16px 16px 16px;
	padding-top: 5px;
	border-top: 1px solid #EBEFF0;
}

.hand-over-detail-date-first {
	margin: 0px 16px 16px 16px;
	padding-top: 5px;
}

#createHandOver {
	margin: 4px 5px;
}

.nurse-chart-list-date {
	font-size: 16px;
    padding: 3px;
}

.nurse-chart-list-date:hover {
	background-color: #F8F9FC;
} 

.nurse-chart-date-exist {
	background-color: #DBF2F4;
	color: #fff;
}

.dduk-title-area {
	margin-bottom: 0px;
}

.in-h2 {
	font-size: 14px !important;
}

.rounds-patient-history {
	height: 572px;
}

.rounds-tab-wrap {
	display: flex;
    gap: 24px;
    justify-content: space-evenly;
}

.rounds-tab {
	margin-top: 32px;
    border-top-right-radius: 18px;
    border-top-left-radius: 18px;
    border: 1px solid var(--border, #E0E8E6);
    border-bottom: none;
    padding: 16px;
    background: var(--white, #FFF);
    width: 35%;
    padding: 4px;
    text-align: center;
    color: #000;
    cursor: pointer;
}

.tab-active {
	background-color: #F8F9FC;
	color: #8D9EA5;
	font-family: 'Pretendard5';
}

.clinic-history-list {
    display: flex;
    overflow-x: hidden;
	white-space: nowrap;
	padding-bottom: 16px;
}

.clinic-history-head {
	display: flex;
	border-radius: 10px;
    border: 1px solid var(--border, #E0E8E6);
    padding: 8px;
    width: 150px;
    height: 80px;
    flex-shrink: 0;
    flex-direction: column;
}

.admission-history-head {
	display: flex;
	border-radius: 10px;
    border: 1px solid var(--border, #E0E8E6);
    padding: 8px;
    width: 150px;
    height: 80px;
    flex-shrink: 0;
    flex-direction: column;
}

.calendar-wrap {
	display: flex;
    gap: 24px;
    justify-content: space-evenly;
}

::-webkit-scrollbar {
    height: 8px;
}

.history-btn {
	width: 12px;
}

.neon-text {
  color: #0ABAB5;
  text-shadow: 0 0 5px #DBF2F4,
}

.light-green-text {
	color: #00A9A4 !important;
}

.h1-default {
	text-align: center;
	width: 100%;
	margin-top: 150px;
	color: #8D9EA5 !important;
	font-size: 2em !important;
}

.h2-default {
	text-align: center;
    width: 100%;
    margin-top: 150px;
    color: #8D9EA5 !important;
    font-size: 1.8em !important;
} 

/* 커서 올리기, 클릭 시 색깔바꾸기 시작 */
.clinic-history-head:hover {
	background-color: #F8F9FC
} 

.admission-history-head:hover {
	background-color: #F8F9FC
}

.selected {
	background-color: #EDF8F9;
}

/* 과거의 진료기록은 선택하면 빨간색깔로 표시 */
.past-record.selected {
	background-color: #FFECEC !important;
}
/* 커서 올리기, 클릭 시 색깔바꾸기 끝 */

.clinic-history-body-scroll {
	height: 433px;
	overflow-x: hidden;
	overflow-y: scroll;
	padding: 16px;
}

.table-clinic-history {
	display: flex;
	padding: 12px 16px;
	flex-direction: column;
	justify-content: center;
	gap: 4px;
	border-radius: 12px;
	background: var(--bg-01, #F8F9FC);
	width: 380px;
	height: auto;
	margin-bottom: 16px;
}

.textarea-clinic-history-injnm {
	resize: none;
	width: 93%;
	height: 50px;
}

.textarea-clinic-history-opinion {
	resize: none;
	width: 93%;
	height: 150px;
}

.textarea-rounds-history-reason {
	resize: none;
	width: 93%;
	height: 120px;
}

.textarea-rounds-history-opinion {
	resize: none;
	width: 93%;
	height: 120px;
}

.date-wrap {
	display: flex;
	flex-direction: column;
	margin: 3px 0px 0px -10px;
}

textarea {
	resize: none;
}

#clinicOpinion {
	width: 475px;
    height: 150px;
}

.d-flex-column {
    display: flex!important;
    flex-direction: column;
}

.rounds-opinion-list {
	display: flex;
    overflow-x: hidden;
    overflow-y: hidden;
    white-space: nowrap;
    padding-bottom: 16px;
    height: 60px;
}

.rounds-opinion-list-head {
    display: flex;
    border-radius: 10px;
    border: 1px solid var(--border, #E0E8E6);
    padding: 8px;
    width: 100px;
    height: 60px;
    flex-shrink: 0;
    flex-direction: column;
}

.rounds-opinion-list-head:hover {
	background-color: #F8F9FC;
}

#divTrodCont {
	font-size: 16px;
}

/* 오더추가 시작 */
.rounds-table{
	width: 100%;
}
.td-padding {
    padding: 10px 0px 10px 5px;
}
.td-padding-data {
	padding-left: 5px;
}
.tr-column {
    background: #F8F9FC;
}
.medicine-order-day, .medicine-order-per, .medicine-order-dose {
	width: 20px;
	height: 20px;
	margin-right: 5px;
}
.medicine-order-qt {
	width: 25px;
	height: 20px;
	margin-right: 5px;
}
input[type=number] {
  -moz-appearance: textfield;
}
#defaultTest, #defaultMedicine, #defaultTreatment {
	text-align: center;
}
#searchOrderset {
	width: 520px;
}
.input-search-value {
	width: 520px;
	height: 48px;
	flex-shrink: 0;
	border-radius: 12px;
	border: 1px solid var(- -border, #EBEFF0);
	background: var(- -bg-01, #F8F9FC);
	color: var(- -black-01, #333);
	font-family: 'Pretendard5';
	font-size: 14px;
	font-style: normal;
	line-height: 160%;
	padding-left: 16px;
	margin: 8px 0px 0px 0px;
}

.table-search {
	width: 520px;
	height: 48px;
	border: 1px solid var(- -border, #EBEFF0);
	background-color: #F8F9FC;
	color: var(- -black-01, #333);
	font-family: 'Pretendard5';
	font-size: 14px;
	font-style: normal;
	padding-left: 16px;
	border-collapse: collapse;
	visibility: hidden;
	position: absolute;
}

.tbody-search {
	position: relative;
}

.order-search {
	width: 590px;
	height: 48px;
	background-color: #F8F9FC;
	border: 1px solid var(- -border, #EBEFF0);
	color: var(- -black-01, #333);
	font-family: 'Pretendard5';
	font-size: 14px;
	font-style: normal;
	padding-left: 16px;
	border-collapse: collapse;
	visibility: hidden;
	position: absolute;
}

.order-body-search {
	position: relative;
}

.table-result {
	margin: 8px 0px 0px 0px;
	width: 520px;
	height: 48px;
	border-style: hidden;
	box-shadow: 0 0 0 1px #EBEFF0;
	border-radius: 12px;
	background: var(- -bg-01, #F8F9FC);
	color: var(- -black-01, #333);
	font-family: 'Pretendard5';
	font-size: 14px;
	font-style: normal;
	padding-left: 16px;
	border-collapse: collapse;
}

.table-order-result {
	margin: 8px 0px 0px 0px;
	width: 590px;
	height: 48px;
	border-style: hidden;
	box-shadow: 0 0 0 1px #EBEFF0;
	border-radius: 12px;
	background: var(- -bg-01, #F8F9FC);
	color: var(- -black-01, #333);
	font-family: 'Pretendard5';
	font-size: 14px;
	font-style: normal;
	padding-left: 16px;
	border-collapse: collapse;
}

.table-search tbody * {
	padding: 2%;
}

.order-search tr * {
	padding: 2%;
}

.table-search tr:hover {
	background: #DBF2F4;
}

.order-search tr:hover {
	background: #DBF2F4;
}

.table-search.active {
	visibility: visible;
}

.order-search.active {
	visibility: visible;
}

.table-search td {
	overflow: hidden;
	text-overflow: ellipsis;
}

.order-search td {
	overflow: hidden;
	text-overflow: ellipsis;
}

.btn-body {
	width: 100.8%;
    font-size: 0.85em !important;
}
/* 오더추가 끝 */

/* 아이콘 모음 시작 */
.icon-calendar {
	width: 48px;
	height: 48px;
}
.icon-stethoscope {
	width: 42px;
	height: 42px;
}
.icon-undo {
	width: 24px;
	height: 24px;
    margin: 4px 0px 0px 559px;
    cursor: pointer;
}
#createNurseChart {
	margin-left: 50px;
}
.icon-trashbin {
	width: 16px;
	height: 16px;
	margin-top: 4px;
	cursor: pointer;
}
.ui-datepicker-trigger {
    display: block;
    width: 24px; 
    height: 24px; 
    border: none; 
    cursor: pointer; 
    margin-top: -10px;
}
#magnifyingGlass {
	width: 16px;
	height: 16px;
	margin-bottom: 1%;
}
.viewTestResult {
	cursor: pointer;
	width: 35%;
}
.view-trod-cont {
	cursor: pointer;
}
.icon-trashbin {
	visibility: hidden;
}
.active {
	visibility: visible;
}
.testing {
	background-image: url(/resources/images/icons/reddot.png);
    background-repeat: no-repeat;
    background-position: 100px 4px;
    background-size: 6px 6px;
}
.testdone {
	background-image: url(/resources/images/icons/greendot.png);
    background-repeat: no-repeat;
    background-position: 100px 4px;
    background-size: 6px 6px;
}
.icon-dot {
	width: 8px;
	height: 8px;
}
/* 아이콘 모음 끝 */
</style>
<c:import url="../common/modal.jsp"></c:import>
<div class="dduk-body-border rounds-left">
	<div class="dduk-inner-border">
		<div class="dduk-title-area">
			<h2>환자 정보 조회</h2>
		</div>
		<div class="patient-info-div">
			<div class="dduk-row">
				<h2 class="in-h2" style="width:50%">이름 : </h2>
				<h2 class="in-h2" style="width:30%">성별 : </h2>
				<h2 class="in-h2" style="width:30%">나이 : </h2>
			</div>
			<div class="dduk-row">
				<h2 class="in-h2" style="width:35%">보호자 이름 : </h2>
				<h2 class="in-h2" style="width:65%">보호자 번호 : </h2>
			</div>
			<div class="dduk-row">
				<h2 class="in-h2" style="width:33%">혈액행 : </h2>
				<h2 class="in-h2" style="width:33%">키 : </h2>
				<h2 class="in-h2" style="width:33%">몸무게 : </h2>
			</div>
		</div>
	</div>
	<div class="dduk-row rounds-tab-wrap">
		<div class="rounds-tab" id="clinicHistory">진료내역</div>
		<div class="rounds-tab tab-active" id="admissionHistory">입원내역</div>
	</div>
	<div class="dduk-inner-border rounds-patient-history">
		<div class="dduk-row clinic-history-list">
			<!-- 심플 과거 진료내역 들어오는곳 -->
		</div>

		<div class="clinic-history-body-scroll">
			<h1 class="h1-default">병상을 선택해주세요</h1>
			<!-- 디테일 과거 진료내역 들어오는곳 -->			
		</div>
	</div>
</div>
<div class="ward-right-wrap">
	
</div>

<script>
$(function() {
	
	// 가장 최근에 조회한 환자번호
	var currentPaNo = '';
	// 가장 최근에 조회한 입원의 정보
	var currentAdmiNo = '';
	
	// 왼쪽 창(환자정보조회, 과거진료,입원내역) 스크립트 시작
	
    // 환자 정보 갱신
    function updatePaInfo(paNo){
    	$.ajax({
    		url: '/clinic/simpleClinicChartList',
    		data: {'paNo' : paNo},
    		type: 'post',
    		dataType: 'json',
    		beforeSend: function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			console.log("환자 정보 가져오기 : ", rst);
    			
    			// 환자정보 갱신
    			let patientInfo = $('.patient-info-div');
    			patientInfo.find('h2').eq(0).text('이름 : ' + rst.paName);
    			patientInfo.find('h2').eq(1).text('성별 : ' + rst.paSex);
    			patientInfo.find('h2').eq(2).text('나이 : ' + getAge(formatResidentNumber(rst.paReg)));
    			patientInfo.find('h2').eq(3).text('보호자 이름 : ' + rst.paNoknm);
    			patientInfo.find('h2').eq(4).text('보호자 번호 : ' + rst.paNokph);
    			patientInfo.find('h2').eq(5).text('혈액형 : ' + rst.paBldType);
    			patientInfo.find('h2').eq(6).text('키 : ' + rst.paHeight + 'cm');
    			patientInfo.find('h2').eq(7).text('몸무게 : ' + rst.paWeight + 'kg');
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	});
    }
	
	
	// 진료내역/입원내역 탭 누를때 이벤트
    $(document).on('click', '.rounds-tab', function() {
    	
    	// 만약 아직 환자를 선택 안했으면 에러
    	if(currentPaNo === ''){
    		Swal.fire({
    			title: '병상을 선택해주세요',
    			icon: 'warning',
    			confirmButtonColor: '#0ABAB5',
    			confirmButtonText: '확인',
    		})
    		return;
    	}
    	
    	// 자신에겐 tab-active를 제거, 다른 하나의 탭엔 tab-active 적용
    	$(this).removeClass('tab-active');
    	$('.rounds-tab').not(this).addClass('tab-active');
    	
    	// 만약 진료내역이면
    	if($(this).text() === '진료내역'){
    		// 진료내역 갱신
    		updatePastClinicChart();
    	// 만약 입원내역이면
    	} else if($(this).text() === '입원내역'){
    		// 입원내역 갱신
    		updatePastAdmissionChart();
    	}
    });
	
	
    // 과거 진료 내역 심플 리스트 갱신
    function updatePastClinicChart(){
    	$.ajax({
    		url: '/clinic/simpleClinicChartList',
    		data: {'paNo' : currentPaNo},
    		type: 'post',
    		dataType: 'json',
    		beforeSend: function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			console.log("환자의 과거 진료내역 가져오기 : ", rst);
    			
    			let firstClinicNo = '';
    			let cont = '';
    			
    			// 과거 진료내역 리스트 갱신
    			$.each(rst.clinicChartVOList, function(index, vo){
    				// 만약 맨 앞의 진료내역이면 선택효과 적용 및 첫번째 진료번호 받아놓기
    				if(index === 0){
    					firstClinicNo = vo.clinicNo;
    					cont += '<div class="clinic-history-head selected" data-clinicno='+vo.clinicNo+'>';
    				} else {
    					cont += '<div class="clinic-history-head" data-clinicno='+vo.clinicNo+'>';
    				}
    				cont += '<div class="dduk-row">'+vo.clinicDt+'</div>';
    				cont += '<div class="dduk-row">담당의 : '+empName+'</div>';
    				cont += '<div class="dduk-row">';
    				cont += '<span class="history-btn"><span class="neon-text">진료</span></span>';
    				
    				if(vo.testOrderVOList.length === 0){
    					cont += '<span class="history-btn">검사</span>';
    				} else {
    					cont += '<span class="history-btn"><span class="neon-text">검사</span></span>';
    				}
					
    				if(vo.medicineOrderVOList.length === 0){
    					cont += '<span class="history-btn">처방</span>';
    				} else {
    					cont += '<span class="history-btn"><span class="neon-text">처방</span></span>';
    				}
    				
    				if(vo.treatmentOrderVOList.length === 0){
    					cont += '<span class="history-btn">치료</span>';
    				} else {
    					cont += '<span class="history-btn"><span class="neon-text">치료</span></span>';
    				}
    				
    				cont += '</div>';
    				cont += '</div>';
    			});
    			
    			$('.clinic-history-list').html(cont);
    			
    			// 첫번째 진료내역 디테일 출력
    			detailPastClinicChart(firstClinicNo);
    			
    			// 입원내역 탭에 선택효과가 적용돼있으면 없애고 진료내역에 적용
    			if($('#clinicHistory').hasClass('tab-active')){
    				$('#admissionHistory').addClass('tab-active');
    				$('#clinicHistory').removeClass('tab-active');
    			}
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	});
    }
    
    
    // 과거 진료 내역 클릭시 디테일 출력
    function detailPastClinicChart(clinicNo){
    	$.ajax({
    		url: '/clinic/lightWeightClinicChartDetail',
    		data: {'clinicNo' : clinicNo},
    		type: 'post',
    		dataType: 'json',
    		beforeSend: function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			
    			console.log('진료번호 ', clinicNo, '로 가져온 진료상세 : ', rst);
    			
    			let clinicInjnm = rst.clinicInjnm === null ? '병명이 없습니다' : rst.clinicInjnm;
    			let clinicOpinion = rst.clinicOpinion === null ? '소견이 없습니다' : rst.clinicOpinion;
    			
    			let cont = `
    				<h4>진단명</h4>
    				<textarea class="dduck-input textarea-clinic-history-injnm" readonly="readonly">`+clinicInjnm+`</textarea>
    				<br><br>
    				
    				<h4>소견</h4>
    				<textarea class="dduck-input textarea-clinic-history-opinion" readonly="readonly">`+clinicOpinion+`</textarea>
    				<br><br>
    			
    				<h4>진단</h4>
    				<div class="table-clinic-history">
    					<table>
    						<thead>
    							<tr>
    								<th class="gray-text" style="width: 15%">분류</th>
    								<th class="gray-text" style="width: 40%">상병명</th>
    								<th class="gray-text" style="width: 30%">발병일</th>
    								<th class="gray-text" style="width: 15%">환부</th>
    							</tr>
    						</thead>
    						<tbody>`;
    						
    						// 상병 진단 출력
    						$.each(rst.injuryDiagnosisVOList, function(index, vo){
    							cont += '<tr>';
    							if(vo.indiType === 'IDTY01'){
    								cont += '<td>주</td>';
    							} else if(vo.indiType === 'IDTY02'){
    								cont += '<td>부</td>';
    							} else if(vo.indiType === 'IDTY03'){
    								cont += '<td>배제</td>';
    							}
								cont += '<td>'+truncateText(vo.injuryVO.ijNm, 12)+'</td>';
								cont += '<td>'+vo.indiDt+'</td>';
								cont += '<td>'+vo.injuryBodyCdNm+'</td>';
								cont += '</tr>'
    						});
    							
    				cont += `
    						</tbody>
    					</table>
    				</div>
    				<br>`;
    				
    				// 검사 받은 내역이 없으면 출력 x
    				if(rst.testOrderVOList.length !== 0) {
    				cont += `
    				<h4>검사</h4>
    				<div class="table-clinic-history">
    					<table>
    						<thead>
    							<tr>
    								<th class="gray-text" style="width: 25%">검사명</th>
    								<th class="gray-text" style="width: 60%">검사결과</th>
    								<th class="gray-text" style="width: 15%">환부</th>
    							</tr>
    						</thead>
    						<tbody>`;

    						// 검사 오더 출력
    						$.each(rst.testOrderVOList, function(index, vo){
    							
    							// 만약 사진결과가 있으면 사진데이터 json으로 저장
    							if(vo.atchFileVO != null){
    								
    								jsonData = '{\"atchFileDetailVOList\": [';
    								
    									$.each(vo.atchFileVO.atchFileDetailVOList, function(i, detailVO){
    										jsonData += '{"atchFileDetailOrlng": "'+detailVO.atchFileDetailOrlng+'", "atchFileDetailSavenm": "'+detailVO.atchFileDetailSavenm+'"}';						

    										if(vo.atchFileVO.atchFileDetailVOList.length != (i+1)){
    											jsonData += ',';
    										}
    									})
    									
    									jsonData += ']}';
    							}
    							
    							cont += '<tr>';
								cont += '<td>'+vo.testVO.testNm+'</td>';
								if(vo.teodRst != null){
								cont += '<td>'+vo.teodRst+'</td>';
								} else if(vo.atchFileVO != null){
									cont += `<td>
										<div class="viewTestResult" data-resultJson='\${jsonData}' data-bs-toggle="modal" data-bs-target="#viewTestOrderResult">
											결과보기
											<img id="magnifyingGlass" src="/resources/images/icons/magnifying-glass.png" alt="magnifyingGlass.png" />
										</div>	
									</td>`;
								} else {
									cont += `<td>검사 미진행</td>`;
								}
								
								if(vo.testOrderBodyCdNm !== null){
									cont += '<td>'+vo.testOrderBodyCdNm+'</td>';
								} else {
									cont += '<td>-</td>';
								}
								cont += '</tr>'
    						});
    						
    				cont +=	`</tbody>
    					</table>
    				</div>
    				<br>`;
    				}
    				
    				// 처방 받은 내역이 없으면 출력 x
    				if(rst.medicineOrderVOList.length !== 0) {
    				cont += `
    				<h4>처방</h4>
    				<div class="table-clinic-history">
    					<table>
    						<thead>
    							<tr>
    								<th class="gray-text w-25">이름</th>
    								<th class="gray-text w-60">약품상세</th>
    								<th class="gray-text w-15">처방량</th>
    							</tr>
    						</thead>
    						<tbody>`;
    							
    						// 처방 오더 출력
    						$.each(rst.medicineOrderVOList, function(index, vo){
    							cont += '<tr>';
								cont += '<td>'+truncateText(vo.medicineVO.mediNm, 6)+'</td>';
								cont += '<td>'+truncateText(vo.medicineVO.mediDetail, 16)+'</td>';
								if(vo.medicineVO.mediDetail === '주사' || vo.medicineVO.mediDetail === '기타 처방'){
									cont += '<td>-</td>';
								} else if(vo.medicineVO.mediDetail === '패치형 진통제' || vo.medicineVO.mediDetail === '연고'){
									cont += '<td>'+vo.mdodQt+'개</td>';
								} else{
									cont += '<td>'+vo.mdodQt+'일분</td>';
								}
								
								cont += '</tr>';
    						});
    						
    				cont += `</tbody>
    					</table>
    				</div>
    				<br>`;
    				}
    				
    				// 치료 받은 내역이 없으면 출력 x
        			if(rst.treatmentOrderVOList.length !== 0) {
        			cont += `
    				<h4>치료</h4>
    				<div class="table-clinic-history">
    					<table>
    						<thead>
    							<tr>
    								<th class="gray-text w-30">치료명</th>
    								<th class="gray-text w-60">치료기록</th>
    								<th class="gray-text w-10">환부</th>
    							</tr>
    						</thead>
    						<tbody>`;
    						
    						// 치료 오더 출력
    						$.each(rst.treatmentOrderVOList, function(index, vo){
    							cont += '<tr>';
								cont += '<td>'+truncateText(vo.treatmentVO.tmNm, 6)+'</td>';
								if(vo.trodCont == null){
								cont += '<td>-</td>';
								// 치료기록 글자수 14글자 넘어가면 돋보기 나와서 자세히보기 기능
								} else if(vo.trodCont.length > 14) {
									cont += '<td>'+truncateText(vo.trodCont, 14)+'<img class="view-trod-cont" data-trodcont="'+vo.trodCont+'" id="magnifyingGlass" src="/resources/images/icons/magnifying-glass.png" alt="magnifyingGlass.png"  data-bs-toggle="modal" data-bs-target="#trodContModal" /></td>';
								} else {
									cont += '<td>'+vo.trodCont+'</td>';
								}
								cont += '<td>'+vo.treatmentOrderBodyCdNm+'</td>';
								cont += '</tr>';
    						});
    							
    				cont += `</tbody>
    					</table>
    				</div>
    				<br>`;
        			}
    			
    			$('.clinic-history-body-scroll').html(cont);
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	})
    }
    
    
    // 과거 입원 내역 심플 리스트 갱신
    function updatePastAdmissionChart(){
    	$.ajax({
    		url: '/rounds/simpleAdmissionChartList',
    		data: {'paNo' : currentPaNo},
    		type: 'post',
    		dataType: 'json',
    		beforeSend: function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			console.log("환자의 과거 입원내역 가져오기 : ", rst);
    			
    			// 과거 입원내역이 없으면?
    			if(rst.length === 0){
    				
    				let cont = '<h1 class="h1-default">입원 내역이 없습니다</h1>';
    				$('.clinic-history-body-scroll').html(cont);
    				$('.clinic-history-list').html('');
    			
    			// 있으면 출력
    			} else {
    			
    				let firstAdmissionNo = '';
    				let cont = '';
    			
    				// 과거 입원내역 리스트 갱신
    				$.each(rst, function(index, vo){
    					// 만약 맨 앞의 입원내역이면 선택효과 적용 및 첫번째 입원번호 받아놓기
    					if(index === 0){
    						firstAdmissionNo = vo.admiNo;
    						cont += '<div class="admission-history-head selected" data-admino='+vo.admiNo+'>';
    					} else {
    						cont += '<div class="admission-history-head" data-admino='+vo.admiNo+'>';
    					}
    					cont += '<div class="dduk-row">입원일 :'+vo.admiIndt+'</div>';
    					cont += '<div class="dduk-row">퇴원일 :'+vo.admiOutdt+'</div>';
    					cont += '<div class="dduk-row">담당의 : '+vo.admiEmpName+'</div>';
    					cont += '<div class="dduk-row"></div>';
    					cont += '</div>';
    				});
    			
    				$('.clinic-history-list').html(cont);
    				// 첫번째 입원내역 디테일 출력
        			detailPastAdmissionChart(firstAdmissionNo);
    			}
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	});
    }
    
    
    // 과거 입원 내역 클릭시 해당 입원 사유 및 심플 회진 날짜 리스트를 출력
    function detailPastAdmissionChart(admiNo){
    	$.ajax({
    		url: '/rounds/simpleRoundsChartList',
    		data: {'admiNo' : admiNo},
    		type: 'post',
    		dataType: 'json',
    		beforeSend: function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			
    			console.log('입원번호 ', admiNo, '로 가져온 심플 입원정보 : ', rst);
    			
    			// 첫번째 진료번호을 담기위한 변수
    			let firstClinicNo = '';
    			
    			let cont = `
    				<h4>입원사유</h4>
    				<textarea class="dduck-input textarea-rounds-history-reason" readonly="readonly">\${rst.admiReason}</textarea>
    				<br><br>`;
    			
    			// 만약 회진 기록이 없으면 없다고 출력
    			if(rst.clinicChartVOList.length === 0){
    				cont += '<h1 class="h1-default" style="margin-top: 50px; font-size: 1.5em !important;">회진 기록이 없습니다</h1>';
    			} else {
    				
    				cont += `
    				<h4>회진기록</h4>
    				<div class="dduk-row rounds-opinion-list">`;
    					
    				// 회진기록 개수만큼 반복
    				$.each(rst.clinicChartVOList, function(index,vo){
    					// 첫번째 회진기록이면 선택해있기 및 첫번째 회진기록 변수에 담아두기
    					if(index === 0) {
    						firstClinicNo = vo.clinicNo;
    						cont += '<div class="rounds-opinion-list-head selected" data-clinicno='+vo.clinicNo+'>';
    					} else {
    						cont += '<div class="rounds-opinion-list-head" data-clinicno='+vo.clinicNo+'>';	
    					}
    					cont += '<div class="dduk-row">'+vo.clinicDt+'</div>';
    					cont += '<div class="dduk-row">';
    					
    					// 해당 진료에 검사,처방,치료가 있었는지를 확인하고 버튼 생성
    					if(vo.testOrderVOList.length === 0){
        					cont += '<span class="history-btn">검사</span>';
        				} else {
        					cont += '<span class="history-btn"><span class="neon-text">검사</span></span>';
        				}
    					
        				if(vo.medicineOrderVOList.length === 0){
        					cont += '<span class="history-btn">처방</span>';
        				} else {
        					cont += '<span class="history-btn"><span class="neon-text">처방</span></span>';
        				}
        				
        				if(vo.treatmentOrderVOList.length === 0){
        					cont += '<span class="history-btn">치료</span>';
        				} else {
        					cont += '<span class="history-btn"><span class="neon-text">치료</span></span>';
        				}
        				
        				cont += '</div>';
        				cont += '</div>';
    				});
    				cont +=`
        				</div>
        				<br>
        				<textarea class="dduck-input textarea-rounds-history-opinion" readonly="readonly"></textarea>
        				<br><br>
        				<div class="admission-history-rounds-detail"></div>`;
    			}
    			
    			$('.clinic-history-body-scroll').html(cont);
    			
    			// 해당 입원의 첫번째 진료차트 정보 뿌려주기
    			if(firstClinicNo !== '') roundsChartDetail(firstClinicNo);
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	})
    }
    
    
    // 과거 회진기록 날짜 탭 누르면 효과적용 및 해당 회진 정보 뿌려주기
    $(document).on('click', '.rounds-opinion-list-head', function(){
    	$('.rounds-opinion-list-head').removeClass('selected');
    	$(this).addClass('selected');
    	
    	roundsChartDetail($(this).data('clinicno'));
    });
    
    
    // 과거 입원내역에서 입원목록 클릭 시 회진목록 에서 회진목록 클릭 시 해당 회진의 자세한 정보 뿌려주기
    function roundsChartDetail(clinicNo){
    	$.ajax({
    		url: '/clinic/lightWeightClinicChartDetail',
    		data: {'clinicNo' : clinicNo},
    		type: 'post',
    		dataType: 'json',
    		beforeSend: function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			console.log('입원내역에서 진료내역의 상세에 출력해줄 vo : ', rst);
    			
    			// 일단 회진기록 넣어주기
    			$('.textarea-rounds-history-opinion').text(rst.clinicOpinion);
    			let cont = '';
    			
    			// 검사 받은 내역이 없으면 출력 x
				if(rst.testOrderVOList.length !== 0) {
				cont += `
				<h4>검사</h4>
				<div class="table-clinic-history">
					<table>
						<thead>
							<tr>
								<th class="gray-text" style="width: 25%">검사명</th>
								<th class="gray-text" style="width: 60%">검사결과</th>
								<th class="gray-text" style="width: 15%">환부</th>
							</tr>
						</thead>
						<tbody>`;

						// 검사 오더 출력
						$.each(rst.testOrderVOList, function(index, vo){
							
							// 만약 사진결과가 있으면 사진데이터 json으로 저장
							if(vo.atchFileVO != null){
								
								jsonData = '{\"atchFileDetailVOList\": [';
								
									$.each(vo.atchFileVO.atchFileDetailVOList, function(i, detailVO){
										jsonData += '{"atchFileDetailOrlng": "'+detailVO.atchFileDetailOrlng+'", "atchFileDetailSavenm": "'+detailVO.atchFileDetailSavenm+'"}';						

										if(vo.atchFileVO.atchFileDetailVOList.length != (i+1)){
											jsonData += ',';
										}
									})
									
									jsonData += ']}';
							}
							
							cont += '<tr>';
							cont += '<td>'+vo.testVO.testNm+'</td>';
							if(vo.teodRst != null){
							cont += '<td>'+vo.teodRst+'</td>';
							} else if(vo.atchFileVO != null){
								cont += `<td>
									<div class="viewTestResult" data-resultJson='\${jsonData}' data-bs-toggle="modal" data-bs-target="#viewTestOrderResult">
										결과보기
										<img id="magnifyingGlass" src="/resources/images/icons/magnifying-glass.png" alt="magnifyingGlass.png" />
									</div>	
								</td>`;
							} else {
								cont += `<td>검사 미진행</td>`;
							}
							cont += '<td>'+vo.testOrderBodyCdNm+'</td>';
							cont += '</tr>'
						});
						
				cont +=	`</tbody>
					</table>
				</div>
				<br>`;
				}
				
				// 처방 받은 내역이 없으면 출력 x
				if(rst.medicineOrderVOList.length !== 0) {
				cont += `
				<h4>처방</h4>
				<div class="table-clinic-history">
					<table>
						<thead>
							<tr>
								<th class="gray-text w-25">이름</th>
								<th class="gray-text w-60">약품상세</th>
								<th class="gray-text w-15">처방량</th>
							</tr>
						</thead>
						<tbody>`;
							
						// 처방 오더 출력
						$.each(rst.medicineOrderVOList, function(index, vo){
							cont += '<tr>';
							cont += '<td>'+truncateText(vo.medicineVO.mediNm, 6)+'</td>';
							cont += '<td>'+truncateText(vo.medicineVO.mediDetail, 16)+'</td>';
							if(vo.medicineVO.mediDetail === '주사' || vo.medicineVO.mediDetail === '기타 처방'){
								cont += '<td>-</td>';
							} else if(vo.medicineVO.mediDetail === '패치형 진통제' || vo.medicineVO.mediDetail === '연고'){
								cont += '<td>'+vo.mdodQt+'개</td>';
							} else{
								cont += '<td>'+vo.mdodQt+'일분</td>';
							}
							
							cont += '</tr>';
						});
						
				cont += `</tbody>
					</table>
				</div>
				<br>`;
				}
				
				// 치료 받은 내역이 없으면 출력 x
    			if(rst.treatmentOrderVOList.length !== 0) {
    			cont += `
				<h4>치료</h4>
				<div class="table-clinic-history">
					<table>
						<thead>
							<tr>
								<th class="gray-text w-30">치료명</th>
								<th class="gray-text w-60">치료기록</th>
								<th class="gray-text w-10">환부</th>
							</tr>
						</thead>
						<tbody>`;
						
						// 치료 오더 출력
						$.each(rst.treatmentOrderVOList, function(index, vo){
							cont += '<tr>';
							cont += '<td>'+truncateText(vo.treatmentVO.tmNm, 6)+'</td>';
							if(vo.trodCont == null){
							cont += '<td>-</td>';
							// 치료기록 글자수 14글자 넘어가면 돋보기 나와서 자세히보기 기능
							} else if(vo.trodCont.length > 14) {
								cont += '<td>'+truncateText(vo.trodCont, 14)+'<img class="view-trod-cont" data-trodcont="'+vo.trodCont+'" id="magnifyingGlass" src="/resources/images/icons/magnifying-glass.png" alt="magnifyingGlass.png"  data-bs-toggle="modal" data-bs-target="#trodContModal" /></td>';
							} else {
								cont += '<td>'+vo.trodCont+'</td>';
							}
							cont += '<td>'+vo.treatmentOrderBodyCdNm+'</td>';
							cont += '</tr>';
						});
							
				cont += `</tbody>
					</table>
				</div>
				<br>`;
    			}
    			
    			$('.admission-history-rounds-detail').html(cont);
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	})
    }
	
	
    // 진료내역 리스트 클릭시 이벤트
    $(document).on('click', '.clinic-history-head', function() {
    	
    	// 이전에 적용됐던 클릭시 효과를 지우고 방금 클릭한곳에 적용
    	$('.clinic-history-head').removeClass('selected');
    	$(this).addClass('selected');
    	
    	// 진료내역 디테일 갱신
    	let clinicNo = $(this).data('clinicno');
    	detailPastClinicChart(clinicNo);
    });
    
    
    // 입원내역 리스트 클릭시 이벤트
    $(document).on('click', '.admission-history-head', function(){
    	
    	// 이전에 적용됐던 클릭시 효과를 지우고 방금 클릭한곳에 적용
    	$('.admission-history-head').removeClass('selected');
    	$(this).addClass('selected');
    	
    	// 진료내역 디테일 갱신
    	let admiNo = $(this).data('admino');
    	detailPastAdmissionChart(admiNo);
    });
    
    
    // 환자 정보 및 진료내역, 입원내역 초기화
    function resetLeftData(){
    	
    	// 환자정보 초기화
    	let patientInfo = $('.patient-info-div');
    	patientInfo.find('h2').eq(0).text('이름 : ');
		patientInfo.find('h2').eq(1).text('성별 : ');
		patientInfo.find('h2').eq(2).text('나이 : ');
		patientInfo.find('h2').eq(3).text('보호자 이름 : ');
		patientInfo.find('h2').eq(4).text('보호자 번호 : ');
		patientInfo.find('h2').eq(5).text('혈액형 : ');
		patientInfo.find('h2').eq(6).text('키 : ');
		patientInfo.find('h2').eq(7).text('몸무게 : ');
		
		// 심플 과거내역 초기화
		$('.clinic-history-list').html('');
		// 디테일 과거진료내역 초기화
		let h1Default = '<h1 class="h1-default">병상을 선택해주세요</h1>';
		$('.clinic-history-body-scroll').html(h1Default); 
		// 입원내역 탭에 선택효과가 적용돼있으면 없애고 진료내역에 적용
		if($('#clinicHistory').hasClass('tab-active')){
			$('#admissionHistory').addClass('tab-active');
			$('#clinicHistory').removeClass('tab-active');
		}
    }
    
    
    // 진료 기록 조회시 스크롤로 이동 기능 시작
    var clinicHistoryList = $('.clinic-history-list');

	let isDown = false;
    let startX;
    let scrollLeft;

    clinicHistoryList.on('mousedown', function(e) {
        isDown = true;
        clinicHistoryList.css('cursor', 'grabbing');
        startX = e.pageX - $(this).offset().left;
        scrollLeft = $(this).scrollLeft();
    });

    clinicHistoryList.on('mouseleave', function() {
        isDown = false;
        clinicHistoryList.css('cursor', 'grab');
    });

    clinicHistoryList.on('mouseup', function() {
        isDown = false;
        clinicHistoryList.css('cursor', 'grab');
    });

    clinicHistoryList.on('mousemove', function(e) {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX - $(this).offset().left;
        const walk = (x - startX) * 1; // 스크롤 속도 조절
        $(this).scrollLeft(scrollLeft - walk);
    });
 	// 진료 기록 조회시 스크롤로 이동 기능 끝
 	
 	
 	// 회진 기록 조회시 스크롤로 이동 기능 시작
	$(document).on('mousedown', '.rounds-opinion-list', function(e) {
  		isDown = true;
   		$(this).css('cursor', 'grabbing');
   		startX = e.pageX - $(this).offset().left;
   		scrollLeft = $(this).scrollLeft();
	});

	$(document).on('mouseleave', '.rounds-opinion-list', function() {
    	isDown = false;
    	$(this).css('cursor', 'grab');
	});

	$(document).on('mouseup', '.rounds-opinion-list', function() {
    	isDown = false;
    	$(this).css('cursor', 'grab');
	});

	$(document).on('mousemove', '.rounds-opinion-list', function(e) {
    	if (!isDown) return;
    	e.preventDefault();
    	const x = e.pageX - $(this).offset().left;
    	const walk = (x - startX) * 1; // 스크롤 속도 조절
    	$(this).scrollLeft(scrollLeft - walk);
	});
	// 회진 기록 조회시 스크롤로 이동 기능 끝
    
	
	// 환자의 과거 진료내역중 검사결과의 사진결과 처리 스크립트
	// 사진결과를 누를 때 해당 사진 결과들을 모달창에 집어넣음
	$(document).on('click', '.viewTestResult', function(){
		
		let resultJson = $(this).data('resultjson');
		let cont = '';
		console.log('사진 결과들의 json데이터 : ', resultJson);
		
		// 만약 사진이 1개밖에 없으면 버튼이 안보이게
		if(resultJson.atchFileDetailVOList.length == 1){
			$('#testOrderResultPrev').css('visibility', 'hidden');
			$('#testOrderResultNext').css('visibility', 'hidden');
		// 1개 이상이면 다시 보이게
		} else {
			$('#testOrderResultPrev').css('visibility', 'visible');
			$('#testOrderResultNext').css('visibility', 'visible');
		}
		
		// 사진 개수만큼 반복
		$.each(resultJson.atchFileDetailVOList, function(index, vo){
			// 변수에 해당 정보들을 집어넣는다
			cont += `<div class="carousel-item `;
			
			// 첫번째 캐러셀을 섬네일?로
			if(index == 0){
				cont += `active`;
			}
			
			cont +=	`">
					<img src="/resources/upload/testOrderResult/\${vo.atchFileDetailSavenm}" class="d-block w-100" alt="\${vo.atchFileDetailOrlng}">
				</div>`;
		})
		
		// 캐러셀 모달에 해당 정보들을 넣음
		$('#testOrderResultSlide').html(cont);
	});
	
	
	// 환자의 과거 진료내역중 치료내역이 너무 길 때 모달로 띄우는 스크립트
	$(document).on('click', '.view-trod-cont', function(){
		let cont = $(this).data('trodcont');
		$('#divTrodCont').text(cont);
	})
    
	// 왼쪽 창(환자정보조회, 과거진료,입원내역) 스크립트 끝
	
	
	// 병동목록 스크립트 시작
	
	// 페이지가 로딩될 때 병상 불러오기 및 DB에서 정보갱신
    updateWardBed();
    getAmsPatientVOList();
    
 	// DB에서 병상 정보들을 불러옴(환자번호, 입원번호, 담당의, 병상번호 등)
    function getAmsPatientVOList(){
    	$.ajax({
    		url: '/ams/getAmsPatientVOList',
    		dataType: 'json',
    		type: 'post',
    		beforeSend:function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			console.log('가져온 병상정보 : ', rst);
    			
    			// 가져온 VO만큼 반복
    			$.each(rst, function(index, patientVO){
    				// 침상정보가 담긴 div를 가져온다
    				let roomNo = $('#' + patientVO.admissionRoomVOList[0].adrmRoomno + "-" + patientVO.admissionRoomVOList[0].adrmBedno);
    				// 2인실인지 아닌지를 판단하는 변수
    				var is2room = patientVO.admissionRoomVOList[0].adrmRoomno.includes('30');
    				// svg 정보를 교체(회색 -> 연두)
    				let newSvg = '';
    				if(is2room){
    					newSvg += `<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto">`;
    				} else {
    					newSvg += `<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">`;
    				}
    				newSvg += `<g clip-path="url(#clip0_688_430)">
    					<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#0ABAB5"/>
    					</g>
    					<defs>
    					<clipPath id="clip0_688_430">
    					<rect width="80" height="80" fill="white"/>
    					</clipPath>
    					</defs>
    					</svg>`;
    				roomNo.find('svg').remove().end().append(newSvg);
    				// 배경색 변경
    				roomNo.css('background-color', '#DBF2F4');
    				// 이름 변경
    				roomNo.find('.d-flex-column').find('div.gray-text').text(patientVO.paName);
    				// 이름, 방번호에 css적용
    				roomNo.find('h2').addClass('light-green-text');
    				roomNo.find('.d-flex-column').find('div.gray-text').addClass('light-green-text');
    				roomNo.find('.d-flex-column').find('div.gray-text').removeClass('gray-text');
    				// 마우스 커서 올려둠
    				roomNo.css('cursor', 'pointer');
    				// 침대에 쓰고있다는 표시의 클래스를 넣어준다
    				roomNo.addClass('using');
    				// 병상 div에 환자번호, 입원번호를 숨겨둠
    				roomNo.attr('data-pano', patientVO.paNo);
    				roomNo.attr('data-admino', patientVO.admissionChartVOList[0].admiNo);
    			});
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	});
    }
 	
 	
 	// n인실 클릭시 이벤트
    $(document).on('click', '.room-tab', function(){
    	// 이전에 적용됐던 클릭시 효과를 지우고 방금 클릭한곳에 적용
    	$(this).removeClass('tab-active');
    	$('.room-tab').not(this).addClass('tab-active');
    	
    	// 2인실 선택시 본인제외하고 모두 안보이게, 본인은 보이게
    	if($(this).text() == '2인실') {
    		$('.bed-list-2').removeClass('hidden');
    		$('.bed-list-4').addClass('hidden');
    		$('.bed-list-6').addClass('hidden');
    	} else if($(this).text() == '4인실') {
    		$('.bed-list-2').addClass('hidden');
    		$('.bed-list-4').removeClass('hidden');
    		$('.bed-list-6').addClass('hidden');
    	} else if($(this).text() == '6인실') {
    		$('.bed-list-2').addClass('hidden');
    		$('.bed-list-4').addClass('hidden');
    		$('.bed-list-6').removeClass('hidden');
    	}
    });
 	
 	
 	// 활성화된 병상 클릭시 이벤트, 회진차트를 불러옴
    $(document).on('click', '.using', function() {
    	
    	// 화면 전환효과(깡통페이지들 출력)
    	updateNurseChart();  // 간호차트 출력
    	updateNurseRecord(); // 간호기록 출력
    	updateHandOver();    // 인수인계 출력
    	
    	// 환자번호가져오기 
    	currentPaNo = $(this).data('pano');
    	// 입원번호가져오기
    	currentAdmiNo = $(this).data('admino');
    	
    	// DB에서 데이터를 가져와 환자정보 갱신하기
    	updatePaInfo(currentPaNo);
    	
    	// DB에서 데이터를 가져와 환자의 과거진료내역 갱신
    	updatePastClinicChart();
    	
    	// DB에서 간호차트 리스트를 가져오고 담당의, 입원일, 퇴원예정일을 갱신
    	getNurseChartList();
    	
    	// DB에서 인수인계를 가져와서 갱신
    	getHandOverList();
    });
 	
 	
	// 회진차트 뒤로가기, 병상정보를 불러옴
    $(document).on('click', '#undoNurseChart', function(){
    	// 최근조회 환자번호, 입원번호 초기화
    	currentPaNo = '';
    	currentAdmiNo = '';
    	// 병상정보 불러오기
    	updateWardBed();
    	// DB에서 병상정보를 가져와서 페이지에 갱신
    	getAmsPatientVOList();
    	// 왼쪽창 초기화
    	resetLeftData();
    });
	
	
	// 병상정보 불러오기
	function updateWardBed() {
		let cont = `
			<div class="d-flex">
	         <div class="d-flex patient-info btn-room-change">
	            <div class="d-flex">
	               <button class="room-tab" id="twinRoom">2인실</button>
	            </div>
	            <div class="d-flex">
	               <button class="room-tab tab-active" id="familyRoom">4인실</button>
	            </div>
	            <div class="d-flex">
	               <button class="room-tab tab-active" id="s
	               uiteRoom">6인실</button>
	            </div>
	         </div>
	      </div>

		<div class="dduk-body-border rounds-bed-list">
		
			<div class="bed-list-2">
				<h2 class="title-bed-2">304호 </h2>
						
						<div class="bed-wrap-2">
				        	<div class="d-flex" style="margin: 0;">
								<div id="304-1" class="d-flex bed-large" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
								<div class="d-flex-column"><h2>304-1</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto;">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        
				        	<div class="d-flex" style="margin: 0;">
								<div id="304-2" class="d-flex bed-large" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
								<div class="d-flex-column"><h2>304-2</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto;">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        </div>
				        
				        <h2 class="title-bed-2">305호 </h2>
						
						<div class="bed-wrap-2">
				        	<div class="d-flex" style="margin: 0;">
								<div id="305-1" class="d-flex bed-large" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>305-1</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto;">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        
				        	<div class="d-flex" style="margin: 0;">
				            	<div id="305-2" class="d-flex bed-large" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				            	<div class="d-flex-column"><h2>305-2</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto;">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        </div>
				        
				        <h2 class="title-bed-2">306호 </h2>
						
						<div class="bed-wrap-2">
				        	<div class="d-flex" style="margin: 0;">
								<div id="306-1" class="d-flex bed-large" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>306-1</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto;">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        
				        	<div class="d-flex" style="margin: 0;">
				            	<div id="306-2" class="d-flex bed-large" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				            	<div class="d-flex-column"><h2>306-2</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto;">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        </div>
				        
				        <h2 class="title-bed-2">307호 </h2>
						
						<div class="bed-wrap-2">
				        	<div class="d-flex" style="margin: 0;">
								<div id="307-1" class="d-flex bed-large" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>307-1</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto;">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        
				        	<div class="d-flex" style="margin: 0;">
				            	<div id="307-2" class="d-flex bed-large" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				            	<div class="d-flex-column"><h2>307-2</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto;">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        </div>
					</div>
					
					<div class="bed-list-4 hidden"> 
						<h2 class="title-bed-4">404호 </h2>
				
						<div class="bed-wrap-4">
				        	<div class="d-flex" style="margin: 0;">
								<div id="404-1" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>404-1</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        
				        	<div class="d-flex" style="margin: 0;">
				            	<div id="404-2" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				            	<div class="d-flex-column"><h2>404-2</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        	
				        	<div class="d-flex" style="margin: 0;">
								<div id="404-3" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>404-3</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        	
				        	<div class="d-flex" style="margin: 0;">
								<div id="404-4" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>404-4</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        </div>
				        
				        <h2 class="title-bed-4">405호 </h2>
						
						<div class="bed-wrap-4">
				        	<div class="d-flex" style="margin: 0;">
								<div id="405-1" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>405-1</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        
				        	<div class="d-flex" style="margin: 0;">
				            	<div id="405-2" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				            	<div class="d-flex-column"><h2>405-2</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        	
				        	<div class="d-flex" style="margin: 0;">
								<div id="405-3" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>405-3</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        	
				        	<div class="d-flex" style="margin: 0;">
								<div id="405-4" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>405-4</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        </div>
				        
				        <h2 class="title-bed-4">406호 </h2>
						
						<div class="bed-wrap-4">
				        	<div class="d-flex" style="margin: 0;">
								<div id="406-1" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>406-1</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        
				        	<div class="d-flex" style="margin: 0;">
				            	<div id="406-2" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				            	<div class="d-flex-column"><h2>406-2</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        	
				        	<div class="d-flex" style="margin: 0;">
								<div id="406-3" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>406-3</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        	
				        	<div class="d-flex" style="margin: 0;">
								<div id="406-4" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%; margin-right: 20px;">
				        		<div class="d-flex-column"><h2>406-4</h2><div class="gray-text">빈 침상</div></div>
				            		<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                		<g clip-path=".url(#clip0_464_1878)">
				                    		<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    	</g>
				                    	<defs>
				                    		<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        	</clipPath>
				                    	</defs>
									</svg>
				            	</div>
				        	</div>
				        </div>
				    </div>
				    
				    
				    <div class="bed-list-6 hidden"> 
				    	<div class="dduk-inner-border bed-list-6-left">
				    		<h2 class="title-bed-6">504호 </h2>
				    		<div class="bed-wrap-6">
				    			<div class="dduk-row">
				    				<div class="d-flex" style="margin: 0;">
										<div id="504-1" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>504-1</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				        			<div class="d-flex" style="margin: 0;">
										<div id="504-2" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>504-2</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				    			</div>
				    			<div class="dduk-row">
				    				<div class="d-flex" style="margin: 0;">
										<div id="504-3" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>504-3</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				        			<div class="d-flex" style="margin: 0;">
										<div id="504-4" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>504-4</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				    			</div>
				    			<div class="dduk-row">
				    				<div class="d-flex" style="margin: 0;">
										<div id="504-5" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>504-5</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				        			<div class="d-flex" style="margin: 0;">
										<div id="504-6" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>504-6</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				    			</div>
				    		</div>
				    	</div>
						<div class="dduk-inner-border bed-list-6-right">
				    		<h2 class="title-bed-6">505호 </h2>
				    		<div class="bed-wrap-6">
				    			<div class="dduk-row">
				    				<div class="d-flex" style="margin: 0;">
										<div id="505-1" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>505-1</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				        			<div class="d-flex" style="margin: 0;">
										<div id="505-2" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>505-2</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				    			</div>
				    			<div class="dduk-row">
				    				<div class="d-flex" style="margin: 0;">
										<div id="505-3" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>505-3</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				        			<div class="d-flex" style="margin: 0;">
										<div id="505-4" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>505-4</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				    			</div>
				    			<div class="dduk-row">
				    				<div class="d-flex" style="margin: 0;">
										<div id="505-5" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>505-5</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				        			<div class="d-flex" style="margin: 0;">
										<div id="505-6" class="d-flex bed-small" style="padding: 16px 24px 16px 16px; margin: 0px; width:48%;">
				        					<div class="d-flex-column"><h2>505-6</h2><div class="gray-text">빈 침상</div></div>
				            					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80" fill="none" style="margin-left: auto; margin-top:50px">
				                				<g clip-path=".url(#clip0_464_1878)">
				                    			<path d="M23.3335 43.3337C28.8668 43.3337 33.3335 38.867 33.3335 33.3337C33.3335 27.8003 28.8668 23.3337 23.3335 23.3337C17.8002 23.3337 13.3335 27.8003 13.3335 33.3337C13.3335 38.867 17.8002 43.3337 23.3335 43.3337ZM63.3335 23.3337H43.3335C39.6668 23.3337 36.6668 26.3337 36.6668 30.0003V46.667H10.0002V20.0003C10.0002 18.167 8.50016 16.667 6.66683 16.667C4.8335 16.667 3.3335 18.167 3.3335 20.0003V63.3337C3.3335 65.167 4.8335 66.667 6.66683 66.667C8.50016 66.667 10.0002 65.167 10.0002 63.3337V56.667H70.0002V63.3337C70.0002 65.167 71.5002 66.667 73.3335 66.667C75.1668 66.667 76.6668 65.167 76.6668 63.3337V36.667C76.6668 29.3003 70.7002 23.3337 63.3335 23.3337Z" fill="#8D9EA5"/>
				                    			</g>
				                    			<defs>
				                    			<clipPath id="clip0_464_1878">
				                        		<rect width="80" height="80" fill="white"/>
				                        		</clipPath>
				                    			</defs>
												</svg>
				            			</div>
				        			</div>
				    			</div>
				    		</div>
				    	</div>
				    </div>
	        
		</div>
		`
		
		$('.ward-right-wrap').html(cont);
	}
	
	// 병동목록 스크립트 끝
	
	// 간호차트 스크립트 시작
	
	// 간호차트 날짜 클릭시 이벤트
	$(document).on('click', '.nurse-chart-list-date', function(){
		// 간호차트 번호 가져오기
		let nurNo = $(this).data('nurno');
		// 차트 내용 출력
		getNurseChartDetail(nurNo);
	});
	
	
	// 간호차트 추가버튼 클릭시 이벤트
	$(document).on('click', '#createNurseChart', function(){
		let cont = `
		<div class="nurse-chart-write-title">
			<h2>차트작성</h2>
			<button class="dduk-btn-info btn-nurse-chart-save">저장</button>
		</div>
		<div class="dduk-row">
			<textarea id="nurCont" class="dduck-input"></textarea>
		</div>
		`
		$('.nurse-chart-cont').html(cont);
	});
	
	
	// DB에서 간호차트 리스트와 간단한 입원정보를 가져옴
	function getNurseChartList(){
		$.ajax({
    		url: '/nurse/getNurseChartList',
    		data: {'admiNo' : currentAdmiNo},
    		dataType: 'json',
    		type: 'post',
    		beforeSend:function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			console.log('입원번호 ', currentAdmiNo, '로 가져온 입원정보 + 간호차트 : ', rst);
    			
    			// 담당의사, 입원일, 퇴원예정일 부터 뿌려줌
    			$('.calendar-wrap').find('.empName').text(rst.admiEmpName);
    			$('.calendar-wrap').find('.inDt').text(rst.admiIndt);
    			$('.calendar-wrap').find('.expOutDt').text(rst.admiExpOutdt);
    			
    			// 간호차트 리스트 갱신
    			let cont = '';
    			// +버튼 만들어주기~
    			cont += `
    				<svg id="createNurseChart" type="button"
					xmlns="http://www.w3.org/2000/svg" width="24" height="24"
					viewBox="0 0 24 24" fill="none">
					<g clip-path="url(#clip0_142_1638)">
					<path
						d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
						fill="#8D9EA5"></path>
					</g>
					<defs>
					<clipPath id="clip0_142_1638">
					<rect width="24" height="24" fill="white"></rect>
					</clipPath>
					</defs>
					</svg>
    			`;
    			// 만약 간호차트 기록이 없다면
    			if(rst.nurChartVOList.length === 0){
    				cont += '<div class="rounds-chart-list-default">회진 기록이 없습니다</div>'
    			} else {
    				$.each(rst.nurChartVOList, function(index, vo){
    					cont += '<div data-nurno="'+vo.nurNo+'" class="nurse-chart-list-date">'+formatDateString(vo.nurEndt)+'</div>';
    				});
    			}
    			$('.nurse-chart-list').html(cont);
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	});
	}
	
	
	// 간호기록 번호로 DB에서 간호차트 내용과 작성자를 가져옴
	function getNurseChartDetail(nurNo){
		$.ajax({
    		url: '/nurse/getNurseChartDetail',
    		data: {'nurNo' : nurNo},
    		dataType: 'json',
    		type: 'post',
    		beforeSend:function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			console.log('간호차트번호 ', nurNo, '로 가져온 간호차트VO : ', rst);
    			
    			// 간호차트 갱신
    			let cont = '';
    			let date = formatDateStringUpgrade(rst.nurEndt);
    			
    			cont += `
    				<div class="nurse-chart-view-title">
    					<h2>차트조회</h2>
    				<h3 class="nurse-chart-view-date">\${date}</h3>
    				</div>
    				<div class="dduk-row">
    					<textarea id="nurCont" class="dduck-input" readonly>작성자: \${rst.nurChartEmpName}\n\${rst.nurCont}</textarea>
    				</div>
    			`;
    			$('.nurse-chart-cont').html(cont);
    			
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
    	});
	}
	
	
	// 간호차트 저장버튼 클릭시 이벤트
	$(document).on('click', '.btn-nurse-chart-save', function(){
		
		Swal.fire({
			title: '차트를 저장하시겠습니까?',
			icon: 'question',
			showCancelButton: true,
			confirmButtonColor: '#0ABAB5',
			cancelButtonColor: '#8D9EA5',
			confirmButtonText: '확인',
			cancelButtonText: '취소'
		}).then((result) => {
			// 확인버튼 클릭시
			if (result.isConfirmed) {
				// 내용 입력 안됐으면 경고
				if($('#nurCont').val() === ''){
					Swal.fire({
						title: '내용을 입력해주세요',
						icon: 'warning',
						confirmButtonColor: '#0ABAB5',
						confirmButtonText: '확인',
					})
					return;
				}
				
				// DB에 넣어줉 데이터
				let data = {
					'admiCd' : currentAdmiNo,
					'nurCont' : $('#nurCont').val(),
					'nurType' : 'NCSO01'
				}
				
				$.ajax({
		    		url: '/nurse/createNurseChart',
		    		data: JSON.stringify(data),
		    		type: 'post',
		    		dataType: 'json',
		    		contentType: "application/json; UTF-8",
		    		beforeSend: function(xhr){
		    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
		    		},
		    		success: function(rst){
		    			console.log("간호차트 넣은 결과 : ", rst);
		    			
		    			Swal.fire({
							title: '차트가 저장되었습니다',
							icon: 'success',
							confirmButtonColor: '#0ABAB5',
							confirmButtonText: '확인',
						})
		    			
		    			// 새로 추가됐으니 리스트 갱신
		    			getNurseChartList();
		    			
		    			// 방금 추가된거로 이동
		    			getNurseChartDetail(rst.nurNo);
		    		},
		    		error: function(xhr, status, error){
		    			console.log('Error:', xhr, status, error);
		    		}
		    	});
			}
		});
	});
	
	
	// 간호차트 깡통 출력
	function updateNurseChart(){
		let cont = `
			<div class="nurse-chart-record-wrap">
				<div class="dduk-body-border nurse-chart">
					<div class="dduk-title-area nurse-chart-header">
						<div class="d-flex">
							<h2>간호차트</h2>
							<img id="undoNurseChart" class="icon-undo" src="/resources/images/icons/undo.png">
						</div>
					</div>
				
					<div class="d-flex nurse-chart-body">
						<div class="nurse-chart-list">
							
						</div>
	
						<div class="nurse-chart-detail">
							<div class="nurse-chart-body-top">
								<div class="calendar-wrap">
	
									<div class="dduk-row">
										<img class="icon-stethoscope" src="/resources/images/icons/stethoscope.png">
										<div class="date-wrap">
											<div>담당의사</div>
											<div class="empName">김영남</div>
										</div>
									</div>
				
									<div class="dduk-row"> 
										<img class="icon-calendar" src="/resources/images/icons/calendar.png">
										<div class="date-wrap">
											<div>입원일</div>
											<div class="inDt">2023-12-22</div>
										</div>
									</div>
	
									<div class="dduk-row">
										<img class="icon-calendar" src="/resources/images/icons/calendar.png">
										<div class="date-wrap">
											<div>퇴원예정일</div>
											<div class="expOutDt">2023-12-28</div>
										</div>
									</div>
	
								</div>
							</div>
							<div class="nurse-chart-cont flex-d-col">
								<div class="nurse-chart-write-title">
									<h2>차트작성</h2>
									<button class="dduk-btn-info btn-nurse-chart-save">저장</button>
								</div>
								<div class="dduk-row">
									<textarea id="nurCont" class="dduck-input"></textarea>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>`;
		
		$('.ward-right-wrap').html(cont);
	}
	
	// 간호차트 스크립트 끝
	
	// 간호기록 스크립트 시작
	
	// 간호기록 깡통 출력
	function updateNurseRecord(){
		let cont = `
			<div class="dduk-body-border nurse-record">
			<div class="dduk-row">
				<div class="dduk-title-area  nurse-record-header">
					<h2>간호기록</h2>
				</div>
			</div>
			<div class="dduk-row">
				<div class="nurse-record-aside">
					<h2 class="nurse-record-aside-tab gray-text record-tab-selected">식이</h2>
					<h2 class="nurse-record-aside-tab gray-text">혈압</h2>
					<h2 class="nurse-record-aside-tab gray-text">체온</h2>
					<h2 class="nurse-record-aside-tab gray-text">섭취량</h2>
					<h2 class="nurse-record-aside-tab gray-text">배출량</h2>
				</div>
				<div class="nurse-record-body">
					<div class="nurse-record-title">
				
					</div>
					<div class="nurse-record-cont">
				
					</div>
				</div>
			</div>
		</div>
		`;
		
		$('.nurse-chart-record-wrap').append(cont);
	}
	
	// 간호기록 스크립트 끝
	
	// 인수인계 스크립트 시작
	
	// DB에서 인수인계 가져와서 리스트로 출력
	function getHandOverList(){
		$.ajax({
			url: '/nurse/getHandOverList',
    		data: {'admiNo' : currentAdmiNo},
    		dataType: 'json',
    		type: 'post',
    		beforeSend:function(xhr){
    			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
    		},
    		success: function(rst){
    			console.log('입원번호 ', currentAdmiNo, '로 가져온 인수인계 리스트 : ', rst);
    			
    			// 인수인계 출력을 위한 변수
    			let cont = '';
    			
    			// 만약 인수인계 기록이 없으면
    			if(rst.length===0){
    				cont += '<h2 class="h2-default">인수인계 기록이 없습니다</h2>';
    			// 인수인계 기록이 있으면
    			} else {
    				
        			// 인수인계를 날짜별로 출력시켜주기 위해 날짜별로 그룹화를 시켜준다
        			// 그룹화된 데이터를 저장할 객체
        			let grouped = {};
        			
        			// 인수인계List를 모두 순회해서 날짜별로 그룹화
        			$.each(rst, function(index, vo){
        				// 날짜를 가져와서 yyyy-MM-dd 식으로 변환 후 변수에 넣어줌 
        				let dateKey = formatDateString(vo.nurEndt);
        				// 각 날짜를 키로 사용해 grouped 객체에 항목을 추가한다
        				// 해당 날짜로 배열을 찾고 존재하지 않으면 새 배열을 생성한 후 VO를 추가
        				if (!grouped[dateKey]) {
        		            grouped[dateKey] = [];
        		        }
        				// 동일한 날짜 키가 이미 존재하면 해당 배열에 VO를 추가
        		        grouped[dateKey].push(vo);
        			});
        			
        			console.log("인수인계에서 그룹화된 객체 : ", grouped);
    				
    				// 첫 날짜 부분만 클래스 다르게 주기위한 변수
        			let isFirst = true;
        			// 그룹화된 객체에 대한 반복(날짜마다 반복)
        			$.each(grouped, function(date, handOverVOList){
        				// 만약 첫 날짜면 class다르게줘야함
        				if(isFirst){
        					cont += `
        						<div class="hand-over-detail-date-first">
        							<div class="gray-text">\${date}</div>
        						</div>
        					`;
        					isFirst = false;
        				} else {
        					cont += `
        						<div class="hand-over-detail-date">
        							<div class="gray-text">\${date}</div>
        						</div>
        					`;
        				}
        				
        				// 객체안의 배열에 대한 반복(날짜배열에 있는 VO마다 반복)
        				$.each(handOverVOList, function(index, handOverVO){
        					
        					// 시간을 HH:mm 형식으로
        					let time = formatTimeString(handOverVO.nurEndt);
        					
        					// 사진설정부분
        					let imgAlt = '';
        					let imgSrc = '';
        					// 만약 사진이 없으면
        					if(handOverVO.nurChartProfileOrlng === null){
        						// 기본이미지로 설정
        						imgAlt = 'profile.png';
        						imgSrc = '/resources/images/403022_business man_male_user_avatar_profile_icon.png';
        					// 사진 있으면 
        					} else {
        						// 링크설정
        						imgAlt = handOverVO.nurChartProfileOrlng;
        						imgSrc = '/resources/upload/empProfile/' + handOverVO.nurChartProfileSavenm;
        					}
        					
        					// 인수인계 동적으로생성
        					cont += `
        						<div class="hand-over-detail">
        							<div class="hand-over-detail-header">
        								<div class="dduk-row">
        									<img class="hand-over-detail-profile" src="\${imgSrc}" alt="\${imgAlt}">
        									<div class="hand-over-detail-name">\${handOverVO.nurChartEmpName}</div>
        									<div class="hand-over-detail-time">\${time}</div>
        								</div>
        							</div>
        							<div class="hand-over-detail-body">
        								<div class="hand-over-detail-cont">\${handOverVO.nurCont}</div>
        							</div>
        						</div>`;
        				})
        			});
    			}
    			
    			$('.hand-over-body').html(cont);
    		},
    		error: function(xhr, status, error){
    			console.log('Error:', xhr, status, error);
    		}
		});
	}
	
	
	// 인수인계 깡통 출력
	function updateHandOver(){
		let cont = `
			<div class="dduk-body-border hand-over">
				<div class="dduk-title-area hand-over-head">
					<div class="d-flex">
						<h2>인수인계</h2>
						<svg id="createHandOver" type="button"
							xmlns="http://www.w3.org/2000/svg" width="24" height="24"
							viewBox="0 0 24 24" fill="none">
							<g clip-path="url(#clip0_142_1638)">
							<path
								d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
								fill="#8D9EA5"></path>
							</g>
							<defs>
							<clipPath id="clip0_142_1638">
							<rect width="24" height="24" fill="white"></rect>
							</clipPath>
							</defs>
						</svg>
					</div>
				</div>
				<div class="hand-over-body">
					
				</div>
			</div>`;
			
		$('.ward-right-wrap').append(cont);
	}
	
	// 인수인계 스크립트 끝
	
	// 유틸 스크립트 시작
	
	// 이름 등이 글자를 제어하고 싶을 때 maxLength까지만 표시
    function truncateText(text, maxLength) {
    	if (text.length > maxLength) {
    		return text.slice(0, maxLength) + '...';
    	} else {
    		return text;
    	}
    }
	
	
 	// 주민번호를 생년월일로 변환
	function formatResidentNumber(residentNumber) {
		
		// 00~39년생은 20을 붙이고 그 외엔 19를 붙인다
	    let year = "";
	    if(Number(residentNumber.substr(0,1)) <= 3){
	    	year += "20";
	    } else {
	    	year += "19";
	    }
	    year += residentNumber.substr(0,2);
	    
	    
	    let month = residentNumber.substr(2,2);
	    let day = residentNumber.substr(4,2);
	    
	    let birthDay = year + "-" + month + "-" + day;
	    return birthDay;
	}
 	
 	
 	// 생년월일로 만나이 계산
	function getAge(paBirthDay) {
		
		// 현재날짜, 생일로 날짜계산
	    const currentDate = new Date();
	    const birthdateDate = new Date(paBirthDay);
	    let age = currentDate.getFullYear() - birthdateDate.getFullYear();

	    // 현재와 생일의 월, 날짜 얻어주기
    	const currentMonth = currentDate.getMonth();
    	const birthdateMonth = birthdateDate.getMonth();
    	const currentDay = currentDate.getDate();
    	const birthdateDay = birthdateDate.getDate();

    	// 현재 날짜가 생년월일보다 앞 날짜면 아직 생일이 오지 않은 상태임(한살빼기)
    	if (currentMonth <= birthdateMonth && currentDay < birthdateDay) {
       		age--;
    	}

	    return age;
	}
 	
 	
	// 날짜형식 데이터를 넣으면 yyyy-MM-dd 로 변환해주는 함수
	function formatDateString(dateString) {

		const dateData = new Date(dateString);
		let year = dateData.getFullYear();
		let month = dateData.getMonth() + 1; 
		let date = dateData.getDate();
		
		// 한 자리 숫자에 0을 붙이는 처리
    	month = month < 10 ? '0' + month : month;
    	date = date < 10 ? '0' + date : date;
		
		let dateStr = `\${year}-\${month}-\${date}`;
		
		return dateStr;
	}
	
	
	// 날짜형식 데이터를 넣으면 yyyy-MM-dd HH:mm 으로 변환해주는 함수
	function formatDateStringUpgrade(dateString) {
	    const dateData = new Date(dateString);
	    let year = dateData.getFullYear();
	    let month = dateData.getMonth() + 1; 
	    let date = dateData.getDate();
	    let hours = dateData.getHours();
	    let minutes = dateData.getMinutes();

	    // 한 자리 숫자에 0을 붙이는 처리
	    month = month < 10 ? '0' + month : month;
	    date = date < 10 ? '0' + date : date;
	    hours = hours < 10 ? '0' + hours : hours;
	    minutes = minutes < 10 ? '0' + minutes : minutes;

	    let dateStr = `\${year}-\${month}-\${date}  \${hours}:\${minutes}`;

	    return dateStr;
	}
	
	
	// 날짜형식 데이터를 넣으면 HH:mm 으로 변환해주는 함수
	function formatTimeString(dateString) {
	    const dateData = new Date(dateString);
	    let hours = dateData.getHours();
	    let minutes = dateData.getMinutes();

	    // 한 자리 숫자에 0을 붙이는 처리
	    hours = hours < 10 ? '0' + hours : hours;
	    minutes = minutes < 10 ? '0' + minutes : minutes;

	    return `\${hours}:\${minutes}`;
	}
	
	// 유틸 스크립트 끝
})
</script>